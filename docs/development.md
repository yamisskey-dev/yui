# 開発手順・開発効率化Tips

## 開発環境構築
- Node.js 20系推奨
- `npm install` で依存パッケージ導入
- TypeScriptで開発（`npm run build`でビルド）
- `config.json`を`example.json`からコピーして設定

## Docker開発Tips
- `docker compose build` でイメージ再構築
- `docker compose up -d` で起動
- 開発時は `built/` をボリュームマウント（docker-compose.ymlのコメント参照）
- ローカルで `npm run build` → `docker compose restart` で即反映

## コード修正・テスト
- 修正後は必ず `npm run build` で型・構文チェック
- エラー時は該当ファイル・行を確認し、型や参照先を修正
- 新機能追加時は対応する単体テストも作成

## コード品質ガイドライン

### コメント・TODO管理
- 新機能実装時は適切なTODOコメントを追加
- 既存TODOの進捗は定期的に見直し
- セキュリティに関わる部分は特に詳細にコメント

### エラーハンドリング
- すべての外部API呼び出しにはエラーハンドリングを実装
- ユーザー向けエラーメッセージは分かりやすく記述
- ログレベルを適切に設定（debug/info/warn/error）

### パフォーマンス考慮
- メモリ使用量を意識した実装
- 長時間実行される処理には適切なタイムアウト設定
- データベースアクセスの最適化

## 機能開発の進め方

### 新モジュール追加時
1. `src/modules/[module-name]/index.ts` を作成
2. `src/index.ts` に追加（コメントアウト状態で）
3. `docs/features/` に対応ドキュメント作成
4. `docs/README.md` の機能一覧を更新
5. テスト実装後に有効化

### 既存機能修正時
1. 影響範囲を事前に確認
2. 後方互換性を考慮
3. 関連ドキュメントも併せて更新

## セキュリティ考慮事項
- APIキーは設定ファイルで管理、ソースコードに埋め込まない
- ユーザー入力は必ずバリデーション実装
- 外部サービス連携時は認証・認可を適切に実装
- ログに機密情報を出力しない

## デバッグ・監視
- 本番環境では構造化ログを使用
- メトリクス収集を適切に実装
- ヘルスチェック機能を各重要機能に追加

## 優先度別改善タスク
詳細な改善計画は [[code-review-2025.md]] を参照

### 最高優先度（即座に着手）
- エラーハンドリングの全面見直し
- 設定システムの型安全性向上
- APIキー管理の強化

### 高優先度（1-2週間以内）
- セッション情報の永続化
- API冗長化とフォールバック
- システム監視の強化

### 中優先度（1-2ヶ月以内）
- 会話システムの改善
- 地域別機能対応
- テストカバレッジ向上

## その他
- serifs.tsやnotingモジュールはコメント充実・拡張性重視
- バージョン管理・タグ付けは「やるべきことが綺麗になってから」実施
- 新機能は段階的にリリース（フィーチャーフラグ活用）

---

運用・仕様の詳細は他のドキュメントを参照してください。 